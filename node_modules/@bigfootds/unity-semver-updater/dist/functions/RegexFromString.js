"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeRegexpFromStringFormat = makeRegexpFromStringFormat;
const constants_1 = require("../utils/constants");
function makeRegexpFromStringFormat(stringRule) {
    let formatRule = stringRule;
    // console.log("Format rule before regex escaping:\n"+formatRule);
    formatRule = formatRule.replace(/[.*?^$()|[\]\\]/g, '\\$&');
    formatRule = formatRule.replace(/[+]/g, '\\\$&');
    // console.log("Format rule after regex escaping:\n"+formatRule);
    formatRule = formatRule.replace("{major}", constants_1.stringRegexMatcherForMajor);
    formatRule = formatRule.replace("{minor}", constants_1.stringRegexMatcherForMinor);
    formatRule = formatRule.replace("{patch}", constants_1.stringRegexMatcherForPatch);
    formatRule = formatRule.replace("{quad}", constants_1.stringRegexMatcherForQuad);
    formatRule = formatRule.replace("{releaseLabel}", constants_1.stringRegexMatcherForReleaseLabel);
    formatRule = formatRule.replace("{buildLabel}", constants_1.stringRegexMatcherForBuildLabel);
    let formatRuleAsLiteral = eval("`" + formatRule + "`");
    return new RegExp(formatRuleAsLiteral, "gm");
}
